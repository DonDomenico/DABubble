<section>
  <div class="chat-header">
    <div class="hearder-content" (click)="showProfileDialog(userId)">
      @if(user) {
      <img src="{{ user.photoURL }}" />
      <p>{{ user.username }}</p>
      } @else if(authService.currentUser) {
      <img src="{{ authService.currentUser.photoURL }}" />
      <p>{{ authService.currentUser.displayName }} (Du)</p>
      }
    </div>
  </div>

  <div class="message-wrapper">
    @for (conversations of conversationService.conversations; track $index) {
    <div class="divider">
      <hr class="line" />
      <span class="date">{{ conversations.messageDate }}</span>
      <hr class="line" />
    </div>

    <div class="message-content">
   <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dicta id nemo dolor tempore expedita ullam nesciunt iusto ipsum sapiente molestias, veniam voluptatibus consectetur dignissimos magni error culpa aut. Dicta, nulla.</p>
      <div class="single-message-container" >
        <img src="{{ conversations.senderAvatar }}" class="member-avatar" />
        <div class="message-content">
          <div class="name-time" >
            <span>{{ conversations.initiatedBy }}</span>
            <p>{{ conversations.timestamp }}</p>
          </div>
  
          <span class="user-message">
            {{ conversations.senderMessage }}
        
          </span>
          <!-- <div class="answer-time">
            <p>
              {{ conversations.answer }}
            </p>
            <span>
              {{ conversations.lastAnswerTime }}
            </span>
          </div> -->
        </div>
      </div>
    </div>
    }
  </div>

    <div class="message-owner" (click)="showProfileDialog(userId)">
      @if(user) {
      <img src="{{ user.photoURL }}" />
      <p>{{ username }}</p>
      }
   
    @if(!isCurrentUser) {
    <p>
      Diese Unterhaltung findet nur zwischen

      <span (click)="showProfileDialog(userId)">&#64; {{ username }}</span>
      und dir statt.
    </p>
    } @if (isCurrentUser) {
    <p>
      Dieser Raum ist nur f√ºr dich da. Mache dir Notizen, liste deine To-dos auf
      oder bewahre Links und Dateien griffbereit auf. Du kannst hier auch gerne
      Dinge mit dir selbst besprechen.
    </p>
    }
  </div>

  <div class="message-box-container">
    @if(conversations) {
    <textarea
      name="message"

      [(ngModel)]="conversationMessage"
    ></textarea>
    }
    <div class="message-box">
      <div class="message-box-icons">
        <!-- <mat-icon>add</mat-icon>
        <span class="vertical-line"></span> -->
        <mat-icon>mood</mat-icon>
        <mat-icon>alternate_email</mat-icon>
      </div>
      <mat-icon class="send-icon" (click)="addMessageText()">send</mat-icon>
    </div>
  </div>
</section>
