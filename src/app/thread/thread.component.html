@if (dataLoaded) {
<section>
  <div class="thread-header">
    <div class="left-side">
      <p>Thread</p>
      <mat-icon>tag</mat-icon>
      <span>
        {{ channelName }}
      </span>
    </div>

    <mat-icon (click)="closeThread()">close</mat-icon>
  </div>
  <div class="divider">
    <hr class="line" />
    <span class="date">{{ message.timestamp | date }}</span>
    <hr class="line" />
  </div>
  <div class="message-wrapper">
    <div class="single-message-container">
      <img src="{{ message.userAvatar }}" class="member-avatar" />
      <div class="message-content">
        <div class="name-time">
          <span>{{ message.userName }}</span>
          <p>{{ message.timestamp | date : "HH:mm" : "CET" }}</p>
        </div>

        <span class="user-message">
          {{ message.userMessage }}
        </span>
      </div>
    </div>
  </div>

  <div class="divider">
    <span class="number-of-answers">
      {{ message.answers.length }} Antwort(en)
    </span>
    <hr class="line" />
  </div>

  @for (answer of message.answers; track $index) {
  <div class="divider">
    <hr class="line" />
    @if(isDifferentDay($index)) {
    <span class="date">{{ answer.timestamp | date }}</span>
    }
    <hr class="line" />
  </div>
  <div class="message-wrapper">
    <div class="single-message-container">
      <img src="{{ answer.userAvatar }}" class="member-avatar" />
      <div class="message-content">
        <div class="name-time">
          <span>{{ answer.userName }}</span>
          <p>{{ answer.timestamp | date : "HH:mm" : "CET" }}</p>
        </div>

        <span class="user-message">
          {{ answer.userMessage }}
        </span>
        <div class="edit-wrapper" (click)="editAnswer(answer)">
          <mat-icon>edit</mat-icon>
        </div>
      </div>
    </div>
  </div>
  }
  <div class="message-box-wrapper">
    <div class="message-box-container">
      
      <textarea
      *ngIf="isEditing"
      name="message"
      placeholder="Bearbeiten..."
      [(ngModel)]="editText"
    ></textarea>
    <button *ngIf="isEditing" (click)="saveEditedAnswer()">Speichern</button>
    <textarea
      *ngIf="!isEditing"
      name="message"
      placeholder="Antworten..."
      [(ngModel)]="answer"
    ></textarea> 
      
  

      <div class="message-box">
        <div class="message-box-icons">
          <button class="emoji-button">ðŸ˜€</button>
          <!-- <emoji-mart
              class="emoji-mart"
              set="twitter"
              *ngIf="showEmojiPicker"
              (emojiSelect)="addEmoji($event)"
              title="Pick your emojiâ€¦"
            ></emoji-mart> -->
          <mat-icon>alternate_email</mat-icon>
        </div>
        <mat-icon class="send-icon" (click)="addAnswer()">send</mat-icon>
      </div>
      <!-- } -->
    </div>
  </div>
</section>
}
